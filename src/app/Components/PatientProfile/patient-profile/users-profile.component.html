<div class="profile" fxLayout="row" fxLayoutGap="20%">
  <div class="profile-menu" fxLayout="column" fxLayoutGap="8%" fxLayoutAlign="start">
    <button (click)="changeSettings(patientSettings.MyProfile)" [disabled]="currentMenuItem===patientSettings.MyProfile"
      mat-raised-button>
      My profile
    </button>
    <button (click)="changeSettings(patientSettings.EditProfile)" [disabled]="currentMenuItem===patientSettings.EditProfile"
      mat-raised-button>
      Edit profile
    </button>
    <button (click)="changeSettings(patientSettings.IllnessHistories)" [disabled]="currentMenuItem===patientSettings.IllnessHistories"
      mat-raised-button>
      My illness histories
    </button>
    <button (click)="changeSettings(patientSettings.Appointments)" [disabled]="currentMenuItem===patientSettings.Appointments"
      mat-raised-button>
      My appointments
    </button>
  </div>
  <div class="settings-expanded-item" fxLayout="row" fxFlex [ngSwitch]="currentMenuItem">
    <div *ngSwitchCase="patientSettings.MyProfile" class="profile-top" fxLayout="row" fxLayoutAlign="center center"
      fxFlex>
      <div class="patient-photo" fxLayoutAlign="center center" fxFlex>
        <form enctype="multipart/form-data">
          <input style="display: none" type="file" (change)="getAvatar($event.target.files)" name="Image" #Image>
          <img [src]="imageToShow" alt="Avatar" (click)="Image.click()" title="Change your profile photo" (error)="img.src = defaultImage"
            #img />
        </form>
      </div>
      <div class="patient-general-info" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20%" fxFlex>
        <div class="patient-name" fxLayout="row" fxLayout.lt-lg="column" fxLayoutAlign="center center" fxLayoutGap="6%">
          <div>{{patient?.firstName}}</div>
          <div>{{patient?.secondName}}</div>
          <div>{{patient?.thirdName}}</div>
        </div>
        <div fxLayoutAlign="center center" fxLayout="column" fxLayoutGap="5%">
          <div>Born on: {{patient?.birthDate | date: 'mediumDate'}}</div>
          <div>Phone number: {{patient?.phoneNumber}}</div>
        </div>
      </div>
    </div>
    <app-update-patient *ngSwitchCase="patientSettings.EditProfile" fxFlex></app-update-patient>
    <div *ngSwitchCase="patientSettings.IllnessHistories" class="profile-bottom" fxLayout="column" fxLayoutGap="0.5%"
      fxFlex>
      <div class="illness-header">
        <h3 style="text-align:center">Illness History</h3>
      </div>
      <div class="without_paginator_shit" fxLayout="row" fxLayout.lt-lg="column" fxLayoutGap="1%">
        <div class="patient-history-search-filter" fxFlex="35%">
          <app-illness-history-search-item (search)="onSearch($event)"></app-illness-history-search-item>
        </div>
        <div class="patient-history" fxLayoutGap="0.5%" fxLayout="column" fxLayoutAlign="space-between stretch">
          <div class="history-items" *ngFor="let IllnessHistory of patientService.illnessHistories">
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <div class="histories-top" fxLayout="row" fxFlex>
                  <div fxFlex>
                    {{IllnessHistory.finishAppointmentTime }}
                  </div>
                  <div fxFlex>
                    {{IllnessHistory.diagnose}}
                  </div>
                </div>
              </mat-expansion-panel-header>
              <div fxLayout="column" fxLayoutGap="5px">
                <div>
                  Complaints: {{IllnessHistory.complaints}}
                </div>
                <div>
                  Disease Anamnesis: {{IllnessHistory.diseaseAnamnesis}}
                </div>
                <div>
                  Life Anamnesis: {{IllnessHistory.lifeAnamnesis}}
                </div>
                <div>
                  Objective status: {{IllnessHistory.objectiveStatus}}
                </div>
                <div>
                  Local status: {{IllnessHistory.localStatus}}
                </div>
                <div>
                  Survey plan: {{IllnessHistory.surveyPlan}}
                </div>
                <div>
                  Treatment plan: {{IllnessHistory.treatmentPlan}}
                </div>
              </div>
            </mat-expansion-panel>
          </div>
        </div>
      </div>
        <mat-paginator [length]="patientService.illnessHistoriesAmount" [pageSize]="pagService.pageSize" (page)="pageSwitch($event)"
          [hidePageSize]="true"></mat-paginator>
    </div>
    <div *ngSwitchCase="patientSettings.Appointments" class="patient-additional-info">
      <app-patient-appointments></app-patient-appointments>
    </div>
  </div>
</div>